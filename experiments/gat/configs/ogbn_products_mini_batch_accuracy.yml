# ogbn_products_mini_batch_accuracy.yml
name: gat - ogbn-products - mini-batch - accuracy
conditionals:
  - name: num_layers
    values: ['2', '3', '4', '5']
parameters: 
  - name: lr
    type: double
    bounds:
      min: .0001
      max: .05
  - name: node_hidden_feats
    type: int
    grid: [8, 16, 32, 64, 128, 256]
  - name: number_of_layers
    type: int
    bounds:
      min: 1
      max: 4
  - name: num_heads
    type: int
    bounds:
      min: 1
      max: 4
  - name: batch_norm
    type: int
    grid: [0, 1]
  - name: norm
    type: categorical
    categorical_values: [both, none, right]
  - name: input_dropout
    type: double
    bounds:
      min: 0.1
      max: 0.5
  - name: attn_dropout
    type: double
    bounds:
      min: 0.1
      max: 0.5
  - name: edge_dropout
    type: double
    bounds:
      min: 0.1
      max: 0.5
  - name: dropout
    type: double
    bounds:
      min: 0.01
      max: 0.7
    prior:
      name: beta
      shape_a: 2
      shape_b: 3
  - name: negative_slope
    type: double
    bounds: 
      min: 0.1
      max: 0.3
  - name: residual
    type: int
    grid: [0, 1]
  - name: activation
    type: categorical
    categorical_values: [leaky_relu, relu]
  - name: use_attn_dst
    type: int
    grid: [0, 1]
  - name: bias
    type: int
    grid: [0, 1]
  - name: batch_size
    type: int
    grid: [500, 750, 1000, 2000, 4000, 8000, 16000]
  - name: layer_1_fanout
    type: int
    conditions: 
      num_layers: ['2', '3', '4', '5']
    bounds:
      min: 5
      max: 26
  - name: layer_2_fanout
    type: int
    conditions: 
      num_layers: ['2', '3', '4', '5']
    bounds:
      min: 5
      max: 26
  - name: layer_3_fanout
    type: int
    conditions: 
      num_layers: ['3', '4', '5']
    bounds:
      min: 5
      max: 26
  - name: layer_4_fanout
    type: int
    conditions: 
      num_layers: ['4', '5']
    bounds:
      min: 5
      max: 26
  - name: layer_5_fanout
    type: int
    conditions: 
      num_layers: ['5']
    bounds:
      min: 5
      max: 26
metrics:
  - name: best epoch 
    strategy: store
    objective: minimize
  - name: best epoch - train loss
    strategy: store
    objective: minimize
  - name: best epoch - train accuracy
    strategy: store
    objective: maximize
  - name: best epoch - valid loss
    strategy: optimize
    objective: minimize
  - name: best epoch - valid accuracy
    strategy: store
    objective: maximize
  - name: best epoch - training time
    strategy: store
    objective: minimize
  - name: avg train epoch time
    strategy: store
    objective: minimize
  - name: avg valid epoch time
    strategy: store
    objective: minimize
budget: 20
parallel_bandwidth: 2
